<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
<h1>Fetch Method Geeky Shows</h1>

<form action="" method="post">
    Name:<input type="text" name="name" id="name">
    Job:<input type="text" name="job" id="job">
    
<button type="submit" id="sub">Submit</button> 
</form>




<div id="data"></div>

<script>
//    fetch('readme.txt').then((response)=>{
//     return response.text()
//    }).then((data)=>{
//     document.write(data);
//     console.log(data);
//    })



//    lets see error handling inside it

// fetch('readme.txt').then((response)=>{
//     if(!response.ok){
//         throw Error(response.statusText);
//     }
//     return response.text()
//    }).then((data)=>{
//     // document.write(data);
//     // console.log(data);
//     document.getElementById('data').innerHTML=data;
//    }).catch((err)=>{
//     console.log("document not found"+err);
//    })



// async await function

// async function see(){
//     let res=await fetch('readme.txt');
// // console.log(res.text());
// let data= await res.text();
// console.log(data);
// }






// async await with try catch block

// async function see(){
//     try{
//     let res=await fetch('readme1.txt');
//     if(!res.ok){
//         throw Error(res.statusText);
//     }
// // console.log(res.text());
// let data= await res.text();
// console.log(data);}
// catch (error){
// console.log(error);
// }
// }

// document.onload=see();



// fetch json data

// fetch('data.json').then((res)=>{
//     return res.json();
// }).then((data)=>{
//     console.log(data);
// })


// // fetch json data with async

// async function saw(){
// const res= await fetch('data.json');
// const data=await res.json();
// console.log(data.name);
// console.log(data.roll);
// }

// document.onload=saw();








// fetch data from remote api





// fetch('https://jsonplaceholder.typicode.com/users').then((res)=>{
//     if(!res.ok){
//         throw Error(res.statusText);
//     }
//     return res.json();
// }).then((data)=>{
//     for(let x in data){
//         document.write(`${data[x].name}  - ${data[x].email} <br>`)
//     }
//     // data.forEach(element => {
//     //     document.write(element.id + "<br>");
//     //     document.write(element.name + "<br>");
//     //     document.write(element.email + "<br>");
//     // });
// }).catch((error)=>{
//     console.log("data not found");
// })




// fetch data from remote api using async function 

// async function load(){
//     const res= await fetch('https://jsonplaceholder.typicode.com/users');
//     const data= await res.json();
//     console.log(data);
//     data.forEach(element => {
//         document.write(element.name);
//         document.write(element.email);
//     });
//     // document.write(data.name);
//     // document.write(data.email);
// }


// document.onload=load();








// now do post request 
// post request is used to update or post data
// post request means front end sa data ja rha ha backend ma 


// document.getElementById("sub").addEventListener("click",check());
// function check(){
// console.log("button clciked");
// const myInit={
//     method:'POST',
//     headers:{
//         'Content-Type':'application/json'
//     },
//     body: '{"name":"Sonam","job":"Web-dev"}'
// }
// fetch('https://reqres.in/api/users?page=2', myInit).then((res)=>{
//     return res.json();
// }).then((data)=>{
//     console.log(data);
// })
// }




// post using async await

// document.getElementById("sub").addEventListener("click",check());
// async function check(){
//     const myInit={
//         method: 'POST',
//         headers:{
//             'Content-Type':'application/json'
//         },
//         body: '{"name":"Aryan","age":22}'
//     }

//     const res= await fetch('https://reqres.in/api/users?page=2',myInit);
//     const data= await res.json();
//     console.log(data);
//     document.write(data.name);
//     document.write(data.age);
// }




// now post form data 

document.getElementById("sub").addEventListener("click",check());

function check(e){
    e.preventDefault();
    let name=document.getElementById('name').value;
    let job=document.getElementById('job').value;

    const myInit={
        method:'POST',
        headers:{
            'Content-Type':'application/json'
        },
        body:JSON.stringify({name:name,job:job})
    }
    fetch('https://reqres.in/api/users?page=2',myInit).then((res)=>{
        return res.json();
    }).then((data)=>{
        console.log(data);
    })

}


















</script>

</body>
</html>